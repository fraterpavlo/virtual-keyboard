(()=>{"use strict";const e=JSON.parse('[{"code":"Backquote","engKey":"`","engShiftKey":"~","ruKey":"ё","ruShiftKey":"Ё","size":"xs","isSpecial":false},{"code":"Digit1","engKey":"1","engShiftKey":"!","ruKey":"1","ruShiftKey":"!","size":"s","isSpecial":false},{"code":"Digit2","engKey":"2","engShiftKey":"@","ruKey":"2","ruShiftKey":"\\"","size":"s","isSpecial":false},{"code":"Digit3","engKey":"3","engShiftKey":"#","ruKey":"3","ruShiftKey":"№","size":"s","isSpecial":false},{"code":"Digit4","engKey":"4","engShiftKey":"$","ruKey":"4","ruShiftKey":";","size":"s","isSpecial":false},{"code":"Digit5","engKey":"5","engShiftKey":"%","ruKey":"5","ruShiftKey":"%","size":"s","isSpecial":false},{"code":"Digit6","engKey":"6","engShiftKey":"^","ruKey":"6","ruShiftKey":":","size":"s","isSpecial":false},{"code":"Digit7","engKey":"7","engShiftKey":"&","ruKey":"7","ruShiftKey":"?","size":"s","isSpecial":false},{"code":"Digit8","engKey":"8","engShiftKey":"*","ruKey":"8","ruShiftKey":"*","size":"s","isSpecial":false},{"code":"Digit9","engKey":"9","engShiftKey":"(","ruKey":"9","ruShiftKey":"(","size":"s","isSpecial":false},{"code":"Digit0","engKey":"0","engShiftKey":")","ruKey":"0","ruShiftKey":")","size":"s","isSpecial":false},{"code":"Minus","engKey":"-","engShiftKey":"_","ruKey":"-","ruShiftKey":"_","size":"s","isSpecial":false},{"code":"Equal","engKey":"=","engShiftKey":"+","ruKey":"=","ruShiftKey":"+","size":"s","isSpecial":false},{"code":"Backspace","engKey":"Backspace","engShiftKey":"Backspace","ruKey":"Backspace","ruShiftKey":"Backspace","size":"xl","isSpecial":true},{"code":"Tab","engKey":"Tab","engShiftKey":"Tab","ruKey":"Tab","ruShiftKey":"Tab","size":"m","isSpecial":true},{"code":"KeyQ","engKey":"q","engShiftKey":"Q","ruKey":"й","ruShiftKey":"Й","size":"s","isSpecial":false},{"code":"KeyW","engKey":"w","engShiftKey":"W","ruKey":"ц","ruShiftKey":"Ц","size":"s","isSpecial":false},{"code":"KeyE","engKey":"e","engShiftKey":"E","ruKey":"у","ruShiftKey":"У","size":"s","isSpecial":false},{"code":"KeyR","engKey":"r","engShiftKey":"R","ruKey":"к","ruShiftKey":"К","size":"s","isSpecial":false},{"code":"KeyT","engKey":"t","engShiftKey":"T","ruKey":"е","ruShiftKey":"Е","size":"s","isSpecial":false},{"code":"KeyY","engKey":"y","engShiftKey":"Y","ruKey":"н","ruShiftKey":"Н","size":"s","isSpecial":false},{"code":"KeyU","engKey":"u","engShiftKey":"U","ruKey":"г","ruShiftKey":"Г","size":"s","isSpecial":false},{"code":"KeyI","engKey":"i","engShiftKey":"I","ruKey":"ш","ruShiftKey":"Ш","size":"s","isSpecial":false},{"code":"KeyO","engKey":"o","engShiftKey":"O","ruKey":"щ","ruShiftKey":"Щ","size":"s","isSpecial":false},{"code":"KeyP","engKey":"p","engShiftKey":"P","ruKey":"з","ruShiftKey":"З","size":"s","isSpecial":false},{"code":"BracketLeft","engKey":"[","engShiftKey":"{","ruKey":"х","ruShiftKey":"Х","size":"s","isSpecial":false},{"code":"BracketRight","engKey":"]","engShiftKey":"}","ruKey":"ъ","ruShiftKey":"Ъ","size":"s","isSpecial":false},{"code":"Backslash","engKey":"\\\\","engShiftKey":"|","ruKey":"\\\\","ruShiftKey":"/","size":"m","isSpecial":false},{"code":"CapsLock","engKey":"CapsLock","engShiftKey":"CapsLock","ruKey":"CapsLock","ruShiftKey":"CapsLock","size":"l","isSpecial":true},{"code":"KeyA","engKey":"a","engShiftKey":"A","ruKey":"ф","ruShiftKey":"Ф","size":"s","isSpecial":false},{"code":"KeyS","engKey":"s","engShiftKey":"S","ruKey":"ы","ruShiftKey":"Ы","size":"s","isSpecial":false},{"code":"KeyD","engKey":"d","engShiftKey":"D","ruKey":"в","ruShiftKey":"В","size":"s","isSpecial":false},{"code":"KeyF","engKey":"f","engShiftKey":"F","ruKey":"а","ruShiftKey":"А","size":"s","isSpecial":false},{"code":"KeyG","engKey":"g","engShiftKey":"G","ruKey":"п","ruShiftKey":"П","size":"s","isSpecial":false},{"code":"KeyH","engKey":"h","engShiftKey":"H","ruKey":"р","ruShiftKey":"Р","size":"s","isSpecial":false},{"code":"KeyJ","engKey":"j","engShiftKey":"J","ruKey":"о","ruShiftKey":"О","size":"s","isSpecial":false},{"code":"KeyK","engKey":"k","engShiftKey":"K","ruKey":"л","ruShiftKey":"Л","size":"s","isSpecial":false},{"code":"KeyL","engKey":"l","engShiftKey":"L","ruKey":"д","ruShiftKey":"Д","size":"s","isSpecial":false},{"code":"Semicolon","engKey":";","engShiftKey":":","ruKey":"ж","ruShiftKey":"Ж","size":"s","isSpecial":false},{"code":"Quote","engKey":"\'","engShiftKey":"\\"","ruKey":"э","ruShiftKey":"Э","size":"s","isSpecial":false},{"code":"Enter","engKey":"Enter","engShiftKey":"Enter","ruKey":"Enter","ruShiftKey":"Enter","size":"xxl","isSpecial":true},{"code":"ShiftLeft","engKey":"Shift","engShiftKey":"Shift","ruKey":"Shift","ruShiftKey":"Shift","size":"xl","isSpecial":true},{"code":"KeyZ","engKey":"z","engShiftKey":"Z","ruKey":"я","ruShiftKey":"Я","size":"s","isSpecial":false},{"code":"KeyX","engKey":"x","engShiftKey":"X","ruKey":"ч","ruShiftKey":"Ч","size":"s","isSpecial":false},{"code":"KeyC","engKey":"c","engShiftKey":"C","ruKey":"с","ruShiftKey":"С","size":"s","isSpecial":false},{"code":"KeyV","engKey":"v","engShiftKey":"V","ruKey":"м","ruShiftKey":"М","size":"s","isSpecial":false},{"code":"KeyB","engKey":"b","engShiftKey":"B","ruKey":"и","ruShiftKey":"И","size":"s","isSpecial":false},{"code":"KeyN","engKey":"n","engShiftKey":"N","ruKey":"т","ruShiftKey":"Т","size":"s","isSpecial":false},{"code":"KeyM","engKey":"m","engShiftKey":"M","ruKey":"ь","ruShiftKey":"Ь","size":"s","isSpecial":false},{"code":"Comma","engKey":",","engShiftKey":"<","ruKey":"б","ruShiftKey":"Б","size":"s","isSpecial":false},{"code":"Period","engKey":".","engShiftKey":">","ruKey":"ю","ruShiftKey":"Ю","size":"s","isSpecial":false},{"code":"Slash","engKey":"/","engShiftKey":"?","ruKey":".","ruShiftKey":",","size":"s","isSpecial":false},{"code":"ArrowUp","engKey":"↑","engShiftKey":"↑","ruKey":"↑","ruShiftKey":"↑","size":"s","isSpecial":false},{"code":"ShiftRight","engKey":"Shift","engShiftKey":"Shift","ruKey":"Shift","ruShiftKey":"Shift","size":"xl","isSpecial":true},{"code":"ControlLeft","engKey":"Ctrl","engShiftKey":"Ctrl","ruKey":"Ctrl","ruShiftKey":"Ctrl","size":"s","isSpecial":true},{"code":"MetaLeft","engKey":"Win","engShiftKey":"Win","ruKey":"Win","ruShiftKey":"Win","size":"s","isSpecial":true},{"code":"AltLeft","engKey":"Alt","engShiftKey":"Alt","ruKey":"Alt","ruShiftKey":"Alt","size":"s","isSpecial":true},{"code":"Space","engKey":" ","engShiftKey":" ","ruKey":" ","ruShiftKey":" ","size":"space","isSpecial":false},{"code":"AltRight","engKey":"Alt","engShiftKey":"Alt","ruKey":"Alt","ruShiftKey":"Alt","size":"s","isSpecial":true},{"code":"ArrowLeft","engKey":"←","engShiftKey":"←","ruKey":"←","ruShiftKey":"←","size":"s","isSpecial":false},{"code":"ArrowDown","engKey":"↓","engShiftKey":"↓","ruKey":"↓","ruShiftKey":"↓","size":"s","isSpecial":false},{"code":"ArrowRight","engKey":"→","engShiftKey":"→","ruKey":"→","ruShiftKey":"→","size":"s","isSpecial":false},{"code":"ControlRight","engKey":"Ctrl","engShiftKey":"Ctrl","ruKey":"Ctrl","ruShiftKey":"Ctrl","size":"s","isSpecial":true}]');new class{rows=null;cols=null;id=null;constructor(e,t,s){this.id=e,this.rows=t,this.cols=s;const i=document.createElement("textarea");i.setAttribute("rows",`${t}`),i.setAttribute("cols",`${s}`),i.id=e,i.classList.add("textarea"),i.addEventListener("input",(()=>{this.value=i.value})),document.body.appendChild(i)}}("textarea",5,50),new class{elements={keyboardContainer:null,keysContainer:null,keys:[],specialKeys:[],notSpecialKeys:[],targetTextArea:null};eventHandlers={onNotSpecialKeyHandler:this.onNotSpecialKeyListener.bind(this),onSpecialKeyHandler:this.onSpecialKeyListener.bind(this),onBackspaceHandler:this.onBackspaceListener.bind(this),onTabHandler:this.onTabListener.bind(this),onCapsLockHandler:this.onCapsLockListener.bind(this),onEnterHandler:this.onEnterListener.bind(this),onShiftHandler:this.onShiftListener.bind(this),onControlHandler:this.onControlListener.bind(this),onMetaLeftHandler:this.onMetaLeftListener.bind(this),onAltHandler:this.onAltListener.bind(this),onMousedownHandler:this.onMousedownListener.bind(this),onKeydownHandler:this.onKeydownListener.bind(this),onKeyupHandler:this.onKeyupListener.bind(this)};functions={setListenerForKey:this.setListenerForKey.bind(this),setTextContentForKey:this.setTextContentForKey.bind(this),getKeyData:this.getKeyData.bind(this),checkShortcut:this.checkShortcut.bind(this),changeLanguage:this.changeLanguage.bind(this)};properties={language:localStorage.getItem("language")||"ru",capsLock:!1,shift:!1,ctrl:!1,alt:!1,pressed:new Set};data={keysDataArr:[],lineBreakArr:[]};constructor(e,t,s,i){this.data.keysDataArr=s,this.data.lineBreakArr=i,this.elements.keyboardContainer=document.createElement("div"),this.elements.keysContainer=document.createElement("div");const n=this.createKeys(this.data.keysDataArr,this.data.lineBreakArr);this.elements.keyboardContainer.classList.add("keyboard"),this.elements.keyboardContainer.id=e,this.elements.keysContainer.classList.add("keyboard__keys","keys-container"),this.elements.targetTextArea=document.getElementById(t),this.elements.keyboardContainer.appendChild(this.elements.keysContainer),document.body.appendChild(this.elements.keyboardContainer),this.elements.keysContainer.appendChild(n),this.elements.keys=this.elements.keysContainer.querySelectorAll(".keys-container_key"),this.elements.specialKeys=this.elements.keysContainer.querySelectorAll(".key_special"),this.elements.notSpecialKeys=this.elements.keysContainer.querySelectorAll(".key_not-special"),document.body.addEventListener("keydown",this.eventHandlers.onKeydownHandler),document.body.addEventListener("keyup",this.eventHandlers.onKeyupHandler)}createKeys(e,t){const s=document.createDocumentFragment();return e.forEach((e=>{const i=document.createElement("button"),n=-1!==t.indexOf(e.code),a=e.isSpecial;if(i.setAttribute("data-code",e.code),i.classList.add("keyboard__key","key",`key_${e.size}`),a?i.classList.add("key_special"):i.classList.add("key_not-special"),this.functions.setTextContentForKey(i),this.functions.setListenerForKey(i),s.appendChild(i),n){const e=document.createElement("div");e.classList.add("line-break-item"),s.appendChild(e)}})),s}setTextContentForKey(e){const t=this.functions.getKeyData(e),s=this.properties.language,i=this.properties.capsLock,n=this.properties.shift;let a="";a=i&&n?t[s+"ShiftKey"].toLowerCase():i?t[s+"Key"].toUpperCase():n?t[s+"ShiftKey"]:t[s+"Key"],e.textContent=a}setListenerForKey(e){const t=this.functions.getKeyData(e);if(t.isSpecial)switch(t.code){case"Backspace":case"Tab":case"CapsLock":case"Enter":e.addEventListener("click",(e=>this.eventHandlers.onSpecialKeyHandler(e,t.code)));break;case"ControlLeft":case"ControlRight":case"MetaLeft":case"AltLeft":case"AltRight":e.addEventListener("dblclick",(e=>this.eventHandlers.onSpecialKeyHandler(e,t.code)));break;case"ShiftLeft":case"ShiftRight":e.addEventListener("mousedown",(e=>this.eventHandlers.onSpecialKeyHandler(e,t.code))),e.addEventListener("dblclick",(e=>this.eventHandlers.onSpecialKeyHandler(e,t.code)))}else e.addEventListener("click",this.eventHandlers.onNotSpecialKeyHandler);e.addEventListener("mousedown",this.eventHandlers.onMousedownHandler)}getKeyData(e){const t=e.getAttribute("data-code");return t?this.data.keysDataArr.find((e=>e.code===t)):null}onBackspaceListener(e){e.preventDefault(),this.elements.targetTextArea.value=this.elements.targetTextArea.value.slice(0,-1)}onTabListener(e){e.preventDefault(),this.elements.targetTextArea.value+="\t"}onCapsLockListener(e,t){e.preventDefault(),this.properties.capsLock=!this.properties.capsLock,this.elements.notSpecialKeys.forEach(this.functions.setTextContentForKey);const s=this.elements.keysContainer.querySelector(`.key[data-code=${t}]`);this.properties.capsLock?s.classList.add("active-lock"):s.classList.remove("active-lock")}onEnterListener(e){e.preventDefault(),this.elements.targetTextArea.value+="\n"}onShiftListener(e,t){e.preventDefault();const s=this.elements.keysContainer.querySelector(`.key[data-code=${t}]`),i=this.elements.keysContainer.querySelectorAll(".key[data-code=ShiftLeft], .key[data-code=ShiftRight]");this.properties.shift=!this.properties.shift,this.elements.notSpecialKeys.forEach(this.functions.setTextContentForKey),"mousedown"===e.type?(s.classList.add("active-lock"),document.addEventListener("mouseup",(()=>{s.classList.remove("active-lock"),this.properties.shift=!this.properties.shift,this.elements.notSpecialKeys.forEach(this.functions.setTextContentForKey)}),{once:!0})):this.properties.shift?s.classList.add("active-lock"):i.forEach((e=>e.classList.remove("active-lock")))}onControlListener(e,t){e.preventDefault(),this.properties.ctrl=!this.properties.ctrl;const s=this.elements.keysContainer.querySelector(`.key[data-code=${t}]`),i=this.elements.keysContainer.querySelectorAll(".key[data-code=ControlLeft], .key[data-code=ControlRight]");this.properties.ctrl?s.classList.add("active-lock"):i.forEach((e=>e.classList.remove("active-lock")))}onMetaLeftListener(e,t){e.preventDefault(),this.elements.keysContainer.querySelector(`.key[data-code=${t}]`).classList.toggle("active-lock")}onAltListener(e,t){e.preventDefault(),this.properties.alt=!this.properties.alt;const s=this.elements.keysContainer.querySelector(`.key[data-code=${t}]`),i=this.elements.keysContainer.querySelectorAll(".key[data-code=AltLeft], .key[data-code=AltRight]");this.properties.alt?s.classList.add("active-lock"):i.forEach((e=>e.classList.remove("active-lock")))}onSpecialKeyListener(e,t){if("click"===e.type||"keydown"===e.type)switch(t){case"Backspace":this.eventHandlers.onBackspaceHandler(e);break;case"Tab":this.eventHandlers.onTabHandler(e);break;case"Enter":this.eventHandlers.onEnterHandler(e);break;case"CapsLock":this.eventHandlers.onCapsLockHandler(e,t)}else if("dblclick"===e.type||"keydown"===e.type||"mousedown"===e.type)switch(t){case"ShiftLeft":case"ShiftRight":this.eventHandlers.onShiftHandler(e,t);break;case"ControlLeft":case"ControlRight":this.eventHandlers.onControlHandler(e,t);break;case"AltLeft":case"AltRight":this.eventHandlers.onAltHandler(e,t);break;case"MetaLeft":this.eventHandlers.onMetaLeftHandler(e,t)}}onNotSpecialKeyListener(e){let t;switch(e.preventDefault(),e.type){case"click":t=e.currentTarget;break;case"keydown":const s=e.code;t=this.elements.keysContainer.querySelector(`.key[data-code=${s}]`)}this.elements.targetTextArea.value+=t.textContent}onMousedownListener(e){const t=e.currentTarget;function s(e){e.currentTarget.classList.toggle("active")}t.classList.add("active"),t.addEventListener("mouseover",s),t.addEventListener("mouseout",s),document.addEventListener("mouseup",(()=>{t.classList.remove("active"),t.removeEventListener("mouseover",s),t.removeEventListener("mouseout",s)}),{once:!0})}onKeydownListener(e){const t=e.code,s=this.elements.keysContainer.querySelector(`.key[data-code=${t}]`);s&&(this.functions.checkShortcut(t),s.classList.add("active"),s.classList.contains("key_special")?this.eventHandlers.onSpecialKeyHandler(e,t):this.eventHandlers.onNotSpecialKeyHandler(e))}onKeyupListener(e){const t=e.code,s=this.elements.keysContainer.querySelector(`.key[data-code=${t}]`);s&&s.classList.remove("active"),this.properties.pressed.delete(t)}checkShortcut(e){this.properties.pressed.add(e),2===this.properties.pressed.size&&this.properties.pressed.has("AltLeft")&&this.properties.pressed.has("ControlLeft")&&this.functions.changeLanguage()}changeLanguage(){"ru"===this.properties.language?this.properties.language="eng":this.properties.language="ru",this.elements.notSpecialKeys.forEach(this.functions.setTextContentForKey),localStorage.setItem("language",this.properties.language)}}("keyboard","textarea",e,["Backspace","Backslash","Enter","ShiftRight","ControlRight"]);const t=document.createElement("h1");t.textContent="Virtual-keyboard";const s=document.createElement("p");s.textContent="Клавиатура создана в операционной системе Windows";const i=document.createElement("p");i.textContent="Для переключения языка комбинация: левыe ctrl + alt. Двойной клик оставляет кнопки Shift Alt Ctrl активными",document.body.appendChild(t),document.body.appendChild(s),document.body.appendChild(i)})();
//# sourceMappingURL=main.js.map